### 通信矩阵

|组件|tcp store|
|----------------|--------|
|源设备|tcp client|
|源IP|device IP|
|源端口|操作系统自动分配，分配范围由操作系统的自身配置决定|
|目的设备|tcp server|
|目的IP|设备地址IP|
|目的端口（侦听）|用户指定，端口号1025~65535|
|协议|TCP|
|端口说明|server与client TCP协议消息接口|
|侦听端口是否可更改|是|
|认证方式|数字证书认证|
|加密方式|TLS 1.3|
|所属平面|业务面|
|版本|所有版本|
|特殊场景|无|

注：acc_links支持通信加密，系统启动后，建议删除本地秘钥证书等信息敏感文件。

### 通信接口

acc_links的通信接口使用c/c++的网络编程接口send/recv完成数据收发，需要包含头文件`sys/socket.h`，接口定义如下。

```c++
/**
 * sockfd: 已建立网络套接字描述符
 * buf：待发送数据指针
 * len：发送数据长度
 * flags：发送标志位
 */
ssize_t send(int sockfd, const void *buf, size_t len, int flags);

/**
 * sockfd: 已建立网络套接字描述符
 * buf：待接收数据指针
 * len：接收数据长度
 * flags：接收标志位
 */
ssize_t recv(int sockfd, void *buf, size_t len, int flags);
```

### 运行用户建议

- 基于安全性考虑，建议您在执行任何命令时，不建议使用root等管理员类型账户执行，遵循权限最小化原则。

### 文件权限最大值建议

- 建议用户在主机（包括宿主机）及容器中设置运行系统umask值为0027及以上，保障新增文件夹默认最高权限为750，新增文件默认最高权限为640。
- 建议对使用当前项目已有和产生的文件、数据、目录，设置如下建议权限。

| 类型           | Linux权限参考最大值 |
| -------------- | ---------------  |
| 用户主目录                        |   750（rwxr-x---）            |
| 程序文件(含脚本文件、库文件等)       |   550（r-xr-x---）             |
| 程序文件目录                      |   550（r-xr-x---）            |
| 配置文件                          |  640（rw-r-----）             |
| 配置文件目录                      |   750（rwxr-x---）            |
| 日志文件(记录完毕或者已经归档)        |  440（r--r-----）             | 
| 日志文件(正在记录)                |    640（rw-r-----）           |
| 日志文件目录                      |   750（rwxr-x---）            |
| Debug文件                         |  640（rw-r-----）         |
| Debug文件目录                     |   750（rwxr-x---）  |
| 临时文件目录                      |   750（rwxr-x---）   |
| 维护升级文件目录                  |   770（rwxrwx---）    |
| 业务数据文件                      |   640（rw-r-----）    |
| 业务数据文件目录                  |   750（rwxr-x---）      |
| 密钥组件、私钥、证书、密文文件目录    |  700（rwx—----）      |
| 密钥组件、私钥、证书、加密密文        | 600（rw-------）      |
| 加解密接口、加解密脚本            |   500（r-x------）        |
