# set current time = 100
# job1: Test current time not exceed (UceFaultTime + JobReportRecoverTimeout), should filter uce fault
# job2: Test current time exceed (UceFaultTime + JobReportRecoverTimeout),
#   but don't receive job recover info, should not filter uce fault
# job3: Test current time exceed (UceFaultTime + JobReportRecoverTimeout),
#   but not exceed (RecoverTime + JobReportCompleteTimeout)
#   and receive job recover info, should filter uce fault
# job4: Test current time exceed (UceFaultTime + JobReportRecoverTimeout),
#   and exceed (RecoverTime + JobReportCompleteTimeout)
#   and receive job recover info, but don't receive job recover complete info, should not filter uce fault

# device info in cm manager
mindx-dl-deviceinfo-node1:
  CmName: "mindx-dl-deviceinfo-node1"
  DeviceList:
    huawei.com/Ascend910-Fault: |
      [
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-0", "fault_code": "80E01801", "fault_time": 90 },
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-1", "fault_code": "80E01801", "fault_time": 89 },
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-2", "fault_code": "80E01801", "fault_time": 89 },
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-3", "fault_code": "80E01801", "fault_time": 50 }
      ]
mindx-dl-deviceinfo-node2:
  CmName: "mindx-dl-deviceinfo-node2"
  DeviceList:
    huawei.com/Ascend910-Fault: |
      [
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-0", "fault_code": "80E01801", "fault_time": 100 },
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-1", "fault_code": "80E01801", "fault_time": 70 },
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-2", "fault_code": "80E01801", "fault_time": 84 },
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-3", "fault_code": "80E01801", "fault_time": 40 }
      ]
---
# the result after uce processor process
mindx-dl-deviceinfo-node1:
  CmName: "mindx-dl-deviceinfo-node1"
  DeviceList:
    huawei.com/Ascend910-Fault: |
      [
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-1", "fault_code": "80E01801", "fault_time": 89 }
      ]
mindx-dl-deviceinfo-node2:
  CmName: "mindx-dl-deviceinfo-node2"
  DeviceList:
    huawei.com/Ascend910-Fault: |
      [
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-1", "fault_code": "80E01801", "fault_time": 70 },
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-2", "fault_code": "80E01801", "fault_time": 84 },
        { "fault_type": "<uce fault type>", "npu_name": "Ascend910-3", "fault_code": "80E01801", "fault_time": 40 }
      ]
---
# job info in JobMgr
job1:
  CMData:
    server_list:
      - device:
          - device_id: 0
        server_name: node1
      - device:
          - device_id: 0
        server_name: node2
job2:
  CMData:
    server_list:
      - device:
          - device_id: 1
        server_name: node1
      - device:
          - device_id: 1
        server_name: node2
job3:
  CMData:
    server_list:
      - device:
          - device_id: 2
        server_name: node1
      - device:
          - device_id: 2
        server_name: node2
job4:
  CMData:
    server_list:
      - device:
          - device_id: 3
        server_name: node1
      - device:
          - device_id: 3
        server_name: node2
---
# mindio report info
Infos:
  job3:
    node1:
      Ascend910-2:
        RecoverTime: 95
    node2:
      Ascend910-2:
        RecoverTime: 95
  job4:
    node1:
      Ascend910-3:
        RecoverTime: 60
        CompleteTime: 90
      Ascend910-1: # Not belong to job4, no effect
        RecoverTime: 101
        CompleteTime: 102
    node2:
      Ascend910-3:
        RecoverTime: 60
        CompleteTime: 90
      Ascend910-1: # Not belong to job4, no effect
        RecoverTime: 101
        CompleteTime: 102