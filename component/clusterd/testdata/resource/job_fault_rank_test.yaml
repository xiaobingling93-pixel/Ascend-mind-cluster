# device info in cm manager
mindx-dl-deviceinfo-node1:
  CmName: "mindx-dl-deviceinfo-node1"
  DeviceList:
    huawei.com/Ascend910-Fault: |
      [
        { "fault_type": "<uce fault type>", "fault_level": "NotHandleFault", "npu_name": "Ascend910-0", "fault_code": "80E01801", "fault_time": 100000 },
        { "fault_type": "<uce fault type>", "fault_level": "RestartRequest", "npu_name": "Ascend910-1", "fault_code": "80E01801", "fault_time": 100000 },
        { "fault_type": "<uce fault type>", "fault_level": "RestartBusiness", "npu_name": "Ascend910-2", "fault_code": "80E01801", "fault_time": 100000 },
        { "fault_type": "<uce fault type>", "fault_level": "FreeRestartNPU", "npu_name": "Ascend910-3", "fault_code": "80E01801", "fault_time": 100000 },
        { "fault_type": "<uce fault type>", "fault_level": "RestartNPU", "npu_name": "Ascend910-4", "fault_code": "80E01801,11111111,22222222", "fault_time": 100000 },
        { "fault_type": "<uce fault type>", "fault_level": "SeparateNPU", "npu_name": "Ascend910-4", "fault_code": "33333333", "fault_time": 100000 }
      ]
mindx-dl-deviceinfo-node2:
  CmName: "mindx-dl-deviceinfo-node2"
  DeviceList:
    huawei.com/Ascend910-Fault: |
      [
        { "fault_type": "<uce fault type>", "fault_level": "RestartNPU", "npu_name": "Ascend910-0", "fault_code": "80E01801,22222222", "fault_time": 100000 },
        { "fault_type": "<uce fault type>", "fault_level": "FreeRestartNPU", "npu_name": "Ascend910-1", "fault_code": "80E01801", "fault_time": 100000 },
        { "fault_type": "<uce fault type>", "fault_level": "RestartBusiness", "npu_name": "Ascend910-2", "fault_code": "80E01801", "fault_time": 100000 },
        { "fault_type": "<uce fault type>", "fault_level": "RestartRequest", "npu_name": "Ascend910-3", "fault_code": "80E01801", "fault_time": 100000 },
        { "fault_type": "<uce fault type>", "fault_level": "NotHandleFault", "npu_name": "Ascend910-4", "fault_code": "80E01801", "fault_time": 100000 }
      ]
---
# job info in JobMgr
job1:
  CMData:
    server_list:
      - device:
          - device_id: 0
            rank_id: 0
        server_name: node1
      - device:
          - device_id: 0
            rank_id: 1
        server_name: node2
job2:
  CMData:
    server_list:
      - device:
          - device_id: 1
            rank_id: 2
        server_name: node1
      - device:
          - device_id: 1
            rank_id: 3
        server_name: node2
job3:
  CMData:
    server_list:
      - device:
          - device_id: 2
            rank_id: 4
        server_name: node1
      - device:
          - device_id: 2
            rank_id: 5
        server_name: node2
job4:
  CMData:
    server_list:
      - device:
          - device_id: 3
            rank_id: 6
        server_name: node1
      - device:
          - device_id: 3
            rank_id: 7
        server_name: node2
job5:
  CMData:
    server_list:
      - device:
          - device_id: 4
            rank_id: 8
        server_name: node1
      - device:
          - device_id: 4
            rank_id: 9
        server_name: node2
---
# expect job fault rank
job1:
  JobId: job1
  FaultList:
    - RankId: 0
      FaultCode: 80E01801
      FaultLevel: NotHandleFault
    - RankId: 1
      FaultCode: 80E01801
      FaultLevel: RestartNPU
    - RankId: 1
      FaultCode: 22222222
      FaultLevel: RestartNPU
job2:
  JobId: job2
  FaultList:
    - RankId: 2
      FaultCode: 80E01801
      FaultLevel: RestartRequest
    - RankId: 3
      FaultCode: 80E01801
      FaultLevel: FreeRestartNPU
job3:
  JobId: job3
  FaultList:
    - RankId: 4
      FaultCode: 80E01801
      FaultLevel: RestartBusiness
    - RankId: 5
      FaultCode: 80E01801
      FaultLevel: RestartBusiness
job4:
  JobId: job4
  FaultList:
    - RankId: 6
      FaultCode: 80E01801
      FaultLevel: FreeRestartNPU
    - RankId: 7
      FaultCode: 80E01801
      FaultLevel: RestartRequest
job5:
  JobId: job5
  FaultList:
    - RankId: 8
      FaultCode: 80E01801
      FaultLevel: RestartNPU
    - RankId: 8
      FaultCode: 11111111
      FaultLevel: RestartNPU
    - RankId: 8
      FaultCode: 22222222
      FaultLevel: RestartNPU
    - RankId: 8
      FaultCode: 33333333
      FaultLevel: SeparateNPU
    - RankId: 9
      FaultCode: 80E01801
      FaultLevel: NotHandleFault